// Each time a salesperson sells a car at the
// Pardeeville New and Used Auto Dealership,
// a record is created containing the salesperson’s
// name and the amount of the sale.
// Sales of new and used cars are kept in separate files,
// sorted by salesperson ID number.
// Management has requested a merged file so that
// all of a salesperson’s sales (both new and used cars)
// are displayed together. The following code is intended
// to merge the files.
start
   Declarations
      string newSalesperson
      num newAmount
      string usedSalesperson
      num usedAmount
      string bothAtEof = "N"
      string HIGH_NAME = "ZZZZZ"
      InputFile newSales
      InputFile usedSales
      OutputFile allsales
   getReady()
   while bothAtEof = "Y"
      detailLoop()
   endwhile
   finish()
stop 

getReady()
   open newSales "NewSales.dat"
   open usedSales "UsedSales.dat"
   open allSales "AllSales.dat"

   input newSalesperson, newAmount from newSales
   if eof then
      usedSalesperson = HIGH_NAME
   endif

   input usedSalesperson, usedAmount from usedSales
   if eof then
      usedsalesPerson = HIGH_NAME
   endif

   if newSalesperson = HIGH_NAME AND usedSalesperson = HIGH_NAME then
      bothAtEof = "Y"
   endif
return

detailLoop()
   if newSalesperson > usedSalesperson then
      output usedSalesperson, usedAmount to allSales
      input newSalesperson, newAmount from newSales
      if eof then
         usedSalesperson = HIGH_NAME
      endif
   else
      output newSalesperson, newAmount to allSales
      input usedSalesperson, usedAmount from usedSales
      if eof then
         newSalesperson = HIGH_NAME
      endif
   endif
   if newSalesperson = HIGH_NAME AND usedSalesperson = HIGH_NAME then
      bothAtEof = "Y"
   endif
return

finish()
   close newSales
   close usedSales
   close allSales
return



CORRECTED:
start
Declarations
string newSalesperson
num newAmount
string usedSalesperson
num usedAmount
string bothAtEof = "N"
string HIGH_NAME = "ZZZZZ"
InputFile newSales
InputFile usedSales
OutputFile allSales
getReady()

while bothAtEof = "N"  // Corrected condition to keep running until both files end
  detailLoop()
endwhile
finish()
stop

getReady()
open newSales "NewSales.dat"
open usedSales "UsedSales.dat"
open allSales "AllSales.dat"
input newSalesperson, newAmount from newSales
if eof(newSales) then  // Corrected the salesperson
  newSalesperson = HIGH_NAME  // Corrected to HIGH_NAME
endif
input usedSalesperson, usedAmount from usedSales
if eof(usedSales) then
  usedSalesperson = HIGH_NAME  // Corrected spelling for consistency
endif
if newSalesperson = HIGH_NAME AND usedSalesperson = HIGH_NAME then
  bothAtEof = "Y"  // Set bothAtEof to 'Y' to end the loop
endif
return

detailLoop()
if newSalesperson > usedSalesperson then
  output usedSalesperson, usedAmount to allSales
  input usedSalesperson, usedAmount from usedSales  // Corrected input from usedSales
  if eof(usedSales) then
    usedSalesperson = HIGH_NAME  // Updated salesperson on EOF
  endif
else
  output newSalesperson, newAmount to allSales
  input newSalesperson, newAmount from newSales  // Corrected input from newSales
  if eof(newSales) then
    newSalesperson = HIGH_NAME  // Updated salesperson on EOF
  endif
endif
if newSalesperson = HIGH_NAME AND usedSalesperson = HIGH_NAME then
  bothAtEof = "Y"
endif
return

finish()
close newSales
close usedSales
close allSales
return
